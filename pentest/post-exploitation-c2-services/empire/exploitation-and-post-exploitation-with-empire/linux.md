# Linux

Работа с базовыми модулями Empire в Linux не отличается от работы на маке. Точно так же, как и с маком, работает кейлоггер `collection/linux/keylogger`. Но в Linux-версии присутствует хороший модуль `privesc/linux/linux_priv_checker`, который собирает со всей системы информацию (и помогает искать вектор повышения привилегий). Среди собираемых данных нужно перечислить следующие:

* основная информация о системе;
* работающие процессы;
* интересные файлы;
* файлы, доступные для записи;
* логи, в которых встречается слово password;
* настройки судоера;
* версия ПО и информация о нем из баз exploit-db;
* доступные на хосте средства разработки.

Для перехода в контекст суперпользователя нам необходимо знать его пароль. Для этого можно задействовать тот же модуль, что и для макa, — `privesc/multi/sudo_spawn`. В качестве параметра нужно задать листенер и пароль sudo.

```
usemodule privesc/multi/sudo_spawn
set Password user
set Listener l1
run
```

В результате в списке агентов Empire появляется новый агент, работающий от имени root.

После получения прав суперпользователя мы применяем два модуля Empire. Первый, `collection/linux/mimipenguin`, позволяет собрать служебные пароли из разных мест. Но он не идеален, поэтому для работы в этой области обычно используются другие средства. Второй модуль — это `persistence/multi/crontab`, помогающий закрепиться в системе за счет использования crontab.

Этому модулю требуется указать имя файла, который будет выполняться в определенные промежутки времени. Самый простой способ — загружать тот же stager Empire.
