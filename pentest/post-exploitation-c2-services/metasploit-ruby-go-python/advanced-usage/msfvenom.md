# msfvenom

### Intro

msfvenom - часть metasploit framework; является заменой msfpayload и msfencode. Используется для генерации payload'ов.

### Usage

msfvenom - генерация payload's \
\-p - платформа и цель пэйлоада, например windows/shell\_reverse\_tcp \
\-f - формат вывода. Например: c - язык Си, exe - исп файл для винды, apk - андроид и т.д. \
\-e - применить кодировку \
\-b - плохие символы. Например, '\x00\xff'

### Подробнее

Shellcode, запускающий командную оболочку shell:\
$ msfvenom -p linux/x86/exec CMD="/bin/sh" -f python

### Encoders

x86/xor\_dynamic - ключ изменяется динамически. Убираются плохие байты, добавляется расшифрование далее.

x86/add\_sub - кодирует payload при помощи инструкции add и sub

x86/alpha\_mixed - Этот энкодер кодирует полезную нагрузку как цифро-буквенную строку с разными регистром букв. Такие шелл-коды называют venetian shellcode.

Msfvenom предлагает на выбор 23 энкодера полезных нагрузок для x86. Каждый из них имеет определенные ограничения и сферы применения, где они максимально эффективны.

Например, энкодер x86/add\_sub нужно дополнительно кастомизировать для работы, хоть он и предлагает наибольшую гибкость, x86/alpha\_mixed позволяет запустить полезную нагрузку в условиях, когда разрешены только буквы и цифры, но для полноценной работы может требовать указания BufferRegister, а x86/xor\_dynamic не требует ничего, но бессилен против «плохих» байтов, которые есть в исходнике декодера.

Как было сказано в начале, авторы некоторых энкодеров ставили своей задачей не только сокрытие «плохих» байтов, но и обход средств защиты. Среди таких энкодеров, например, x86/shikata\_ga\_nai.

### Cheat sheet

{% file src="../../../../.gitbook/assets/cheet_sheet.txt" %}
